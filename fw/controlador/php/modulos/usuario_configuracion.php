<?phprequire_once('fw/controlador/php/modulos/maestro.class.php');class UsuarioConfiguracion extends Maestro {    public $tipo_contenido = 'html';    protected $conexion_base_datos;    //public $modulo = "configuracion";    //public $nombre_tabla = "interlocutor_condicion";    //public $nombre_tabla2 = "tema";    CONST TABLA_MODULO = "usuario_configuracion";    CONST CARPETA = "usuario_configuracion";    CONST WIDHT = "250";    CONST HEIGHT = "250";    CONST IMAGEN = "";    CONST ERROR_EDICION = "";    CONST ESTADO_ACTIVO = 1;    CONST ESTADO_BLOQUEADO = 2;    CONST ESTADO_ELIMINADO = 3;    function home() {        $this->tipo_contenido = 'ajax';        $interlocutor = $this->gn->get_data_loged('id_interlocutor');        $datos_configuracion = $this->db->select(array('i.id_interlocutor_condicion', 't.descripcion', 'i.titulo_sitio', 'i.imagen_perfil', 'i.imagen_logo'), self::TABLA_MODULO . ' i, fw_tema t', "i.tema_id = t.id_tema AND id_tema = tema_id AND t.estado_id = " . self::ESTADO_ACTIVO . " AND interlocutor_id =" . $interlocutor);        $temas = $this->db->select(array('*'), 'fw_tema', "estado_id =" . self::ESTADO_ACTIVO);        require_once("fw/vista/html/configuracion.html.php");        ConfiguracionHTML::home($datos_configuracion, $temas);    }    function editar() {        $this->tipo_contenido = '';        $parametros = $this->gn->traer_parametros('POST');        //$this->gn->debug($parametros);        $usuario = $this->gn->get_data_loged('id_usuario');        $id_interlocutor_condicion = $parametros->id_interlocutor_condicion;        unset($parametros->id_interlocutor_condicion);        /* CAPTURA IMAGEN */        if (isset($_FILES['imagen_perfil']['name'])) {            $resultado = $this->gn->generar_imagenes('imagen_perfil', self::CARPETA, $usuario, self::WIDHT, self::HEIGHT, $_FILES['imagen_perfil']);            if ($resultado !== '001' && $resultado != '002') {                $parametros->imagen_perfil = $resultado;            } else {                echo "error al carga imagen";            }        }        if (isset($_FILES['imagen_logo']['name'])) {            $resultado = $this->gn->generar_imagenes('imagen_logo', self::CARPETA, $usuario, self::WIDHT, self::HEIGHT, $_FILES['imagen_logo']);            if ($resultado !== '001' && $resultado != '002') {                $parametros->imagen_logo = $resultado;            } else {                echo "error al carga imagen";            }        }        $this->primary_key = ' usuario_id ';        $respuesta_edicion = $this->editar_elemento($parametros, $usuario, self::TABLA_MODULO);        if (!$respuesta_edicion) {            $mensaje = $this->nc->traer_mensaje_respuesta(self::ERROR_EDICION);            $this->nc->retornar_respuesta_ajax($mensaje['descripcion'], self::ERROR_EDICION);            return self::ERROR_EDICION;        }        header('location:?opcion=subopcion&id=2');    }}